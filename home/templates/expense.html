{% extends 'base.html' %}

{% block title %}Expense{% endblock %}

{% block content %}
<h1 class="text-center">Expense Page</h1>
<form method="post" class="mt-4">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" name="expense_submit" class="btn btn-danger btn-block">Chiqim</button>
</form>

<h2 class="text-center mt-4">Add New Expense Category</h2>
<form method="post" class="mt-4">
    {% csrf_token %}
    {{ new_category_form.as_p }}
    <button type="submit" name="new_expense_category" class="btn btn-primary btn-block">Add Category</button>
</form>

<script type="text/javascript">
document.addEventListener('DOMContentLoaded', function() {
    function toggleBankNameField() {
        var paymentMethod = document.getElementById('id_payment_method').value;
        var bankNameField = document.getElementById('id_bank_name');
        if (paymentMethod === 'card') {
            bankNameField.parentElement.style.display = 'block';
        } else {
            bankNameField.parentElement.style.display = 'none';
        }
    }

    var paymentMethodField = document.getElementById('id_payment_method');
    if (paymentMethodField) {
        paymentMethodField.addEventListener('change', toggleBankNameField);
    }

    toggleBankNameField(); // Initialize the visibility on page load
});
</script>
{% endblock %}
